<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>connect</title>
    <link href="../../../images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "../../../";</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async="async"></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/jetbrains-mono.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="../../../scripts/prism.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
</head>
<body>
<div class="navigation-wrapper" id="navigation-wrapper">
    <div id="leftToggler"><span class="icon-toggler"></span></div>
    <div class="library-name">
            <a href="../../../index.html">
                    <span>NXFit SDK</span>
            </a>
    </div>
    <div>
    </div>
    <div class="pull-right d-flex">
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":nxfit-sdk:dokkaHtml/release">androidJvm</button>
        </div>
        <button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
    </div>
</div>
<div id="container">
    <div id="leftColumn">
        <div id="sideMenu"></div>
    </div>
    <div id="main">
<div class="main-content" data-page-type="member" id="content" pageIds="NXFit SDK::com.neoex.nxfit.managers.integrations/IntegrationsManager/connect/#kotlin.String#kotlin.coroutines.SuspendFunction1[android.net.Uri,kotlin.Unit]/PointingToDeclaration//2019718036">
  <div class="breadcrumbs"><a href="../../../index.html">NXFit SDK</a><span class="delimiter">/</span><a href="../index.html">com.neoex.nxfit.managers.integrations</a><span class="delimiter">/</span><a href="index.html">IntegrationsManager</a><span class="delimiter">/</span><span class="current">connect</span></div>
  <div class="cover ">
    <h1 class="cover"><span><span>connect</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":nxfit-sdk:dokkaHtml/release"><div class="symbol monospace"><span class="token keyword">abstract </span><span class="token keyword">suspend </span><span class="token keyword">fun </span><a href="connect.html"><span class="token function">connect</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">integrationIdentifier<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-string/index.html">String</a><span class="token punctuation">, </span></span><span class="parameter ">authorizeAction<span class="token operator">: </span><span class="token keyword">suspend </span><span class="token punctuation">(</span><span class="token keyword"></span>authorizeUrl<span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/android/net/Uri.html">Uri</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin-stdlib/kotlin/-unit/index.html">Unit</a><span class="token operator"> = </span>{}</span></span><span class="token punctuation">)</span></div><p class="paragraph">Connects the NXFit user to the specified integration. This method supports two basic flows: those that require user authorization and those that do not.</p><h2 class=""> Cloud based integrations</h2><p class="paragraph">Integrations that have the <a href="../../com.neoex.nxfit.models/-integration-model/is-local.html">IntegrationModel.isLocal</a> property set to <strong>false</strong> require user authorization. For integrations requiring authorization, the <a href="connect.html">authorizeAction</a> callback is called and the client must use the provided <a href="https://developer.android.com/reference/kotlin/android/net/Uri.html">Uri</a> to launch an <a href="https://developer.android.com/reference/kotlin/android/content/Intent.html">Intent</a> to navigate the user to the authorize page. The provided <a href="https://developer.android.com/reference/kotlin/android/net/Uri.html">Uri</a>, once launched via an <a href="https://developer.android.com/reference/kotlin/android/content/Intent.html">Intent</a>, puts the user through the integration authorize process. Part of the <a href="https://developer.android.com/reference/kotlin/android/net/Uri.html">Uri</a> includes a redirect URL which is used to send the result of the authorize process back to your app. The redirect URL contains the application package ID of the app initiating the authorize process. This is done to ensure that the application initiating the authorize process receives the result from the browser. An <a href="https://developer.android.com/reference/kotlin/android/content/IntentFilter.html">IntentFilter</a> is required to make this work.</p><h3 class=""> Get the Application Package ID</h3><p class="paragraph">The application package ID may be retrieved via <strong>Context.getPackageName()</strong> and can be viewed in your app module's build.gradle file under: <strong>android.defaultConfig.applicationId</strong>.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">android {
    namespace 'com.example.app'
    ....
    defaultConfig {
        applicationId &quot;com.example.app&quot;  // <-- this is the application package ID
        minSdk 24
        targetSdk 33
        versionCode 1
        versionName &quot;1.0&quot;
        ....
    }
    ....
}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Create the IntentFilter with the Application Package ID</h3><p class="paragraph">Define an <strong>intent-filter</strong> in the manifest to accept Intents with the scheme matching your application package ID. The filter should have an <i>action</i> of <strong>VIEW</strong>, a <i>category</i> of <strong>DEFAULT</strong> and <strong>BROWSABLE</strong>, and <i>data</i> set to your app's package ID. Example intent-filter:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea"></code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Initiate authorize process</h3><p class="paragraph">To start the integration authorize process an <a href="https://developer.android.com/reference/kotlin/android/content/Intent.html">Intent</a> must be used to browse to the authorize page. The <a href="https://developer.android.com/reference/kotlin/android/net/Uri.html">Uri</a> for the Intent is provided in the <a href="connect.html">authorizeAction</a> callback. The provided <a href="https://developer.android.com/reference/kotlin/android/net/Uri.html">Uri</a> already contains the necessary redirect URL that includes the application package ID. With the integration authorize <a href="https://developer.android.com/reference/kotlin/android/net/Uri.html">Uri</a> in hand, use the <strong>CustomTabsIntent</strong> to navigate to it. Example:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">integrationsManager.connect(&quot;garmin&quot;) { authorizeUri ->
    // Garmin is a cloud based integration, so we'll need to use
    // the provided authorizeUri to launch an Intent.
    val builder = CustomTabsIntent.Builder()

    builder
      .setShowTitle(true)
      .setShareState(SHARE_STATE_OFF)
      .build()
      .launchUrl(context, authorizeUri)
}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Handle response</h3><p class="paragraph">When a user completes the authorize procedure, an <a href="https://developer.android.com/reference/kotlin/android/content/Intent.html">Intent</a> will be sent to the associated activity. This can be handled either in the Activity's <strong>onCreate</strong> method (via getIntent()), or in the <strong>onNewIntent</strong> method.</p><p class="paragraph">One recommendation is to set the launchMode of the receiving activity in your manifest to &quot;singleTop&quot;. This will prevent launching the activity a second time if it's already running. The <a href="https://developer.android.com/reference/kotlin/android/content/Intent.html">Intent</a> contains the response and it must be processed by the <a href="index.html">IntegrationsManager</a> via the <a href="handle-authorize-response.html">IntegrationsManager.handleAuthorizeResponse</a> method. Example:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">override fun onNewIntent(intent: Intent) {
  super.onNewIntent(intent)
  val data = intent.data

   data?.let { uri ->
     integrationsManager.handleAuthorizeResponse(uri.toString())
   }
}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> Local Integrations</h2><p class="paragraph">Integrations that do <strong>NOT</strong> require authorization are considered <i>local integrations</i> (<a href="../../com.neoex.nxfit.models/-integration-model/is-local.html">IntegrationModel.isLocal</a> property set to <strong>true</strong>). Local integrations do not have a cloud based server hosting the health data, it is all located on the device the app is running on. One example of this is <i>Google Health Connect</i>.</p><p class="paragraph">For local integrations, a call to <a href="connect.html">connect</a> is still required but the <a href="connect.html">authorizeAction</a> callback is never called and a call to <a href="handle-authorize-response.html">handleAuthorizeResponse</a> should not be made. Instead, the <a href="connection-events.html">connectionEvents</a> flow will immediately emit the appropriate <a href="../../com.neoex.nxfit.enums/-integration-connection-code/index.html">IntegrationConnectionCode</a> once the local integration is connected. Likewise, a call to <a href="disconnect.html">disconnect</a> will immediately emit via the <a href="disconnection-events.html">disconnectionEvents</a> flow once the local integration is disconnected.</p><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":nxfit-sdk:dokkaHtml/release" data-filterable-set=":nxfit-sdk:dokkaHtml/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>integration</span><wbr></wbr><span><span>Identifier</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The identifier of the integration that the user is attempting to connect.</p></div></div></div></div><div class="table-row" data-filterable-current=":nxfit-sdk:dokkaHtml/release" data-filterable-set=":nxfit-sdk:dokkaHtml/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>authorize</span><wbr></wbr><span><span>Action</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A suspend function that is called if the integration requires user authorization. The     function provides a <a href="https://developer.android.com/reference/kotlin/android/net/Uri.html">Uri</a> to be used to launch an <a href="https://developer.android.com/reference/kotlin/android/content/Intent.html">Intent</a> to navigate the user to the integration authorize     page. If the integration does not require authorization, this function is never called. If the integration is     a local integration (example: Health Connect) then this function is never called.</p></div></div></div></div></div><h4 class="">Throws</h4><div class="table"><div class="table-row" data-filterable-current=":nxfit-sdk:dokkaHtml/release" data-filterable-set=":nxfit-sdk:dokkaHtml/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><a href="../../com.neoex.nxfit.exceptions/-invalid-connect-response-exception/index.html"><span>Invalid</span><wbr></wbr><span>Connect</span><wbr></wbr><span>Response</span><wbr></wbr><span><span>Exception</span></span></a></div></span></div><div><div class="title"><p class="paragraph">if the response from the server is invalid or cannot be processed.</p></div></div></div></div></div></div></div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>Â© 2025 Copyright</span><span
                class="pull-right"><span>Generated by </span><a
                href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
    </div>
</div>
</body>
</html>
